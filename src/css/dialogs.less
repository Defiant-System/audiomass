
.dialog-box {
	background: rgba(#000,.35);
	position: absolute;
	padding: 1px;
	z-index: 23;
	border-radius: 7px;
	filter: drop-shadow(0 1px 3px rgba(#000,.5));
	transform-origin: 50% 0;
	visibility: hidden;
	// default position
	// top: 250px;
	// left: 300px;
	top: 45%;
	left: 50%;
	margin: -200px 0 0 -200px;
	// transform: translateY(-200px) translateX(-200px);

	&:before {
		content: "";
		position: absolute;
		top: 1px;
		left: 0;
		right: 0;
		height: 1px;
		opacity: .35;
		z-index: 2;
		background: linear-gradient(90deg, transparent 0%, #cdf 50%, transparent 100%);
	}

	&.showing {
		visibility: visible;
	}

	&.opening {
		visibility: visible;
		animation: ima-opening 150ms ease-in-out forwards;
	}

	&.closing {
		animation: ima-closing 150ms ease-in-out forwards;
	}

	&[data-dlg="dlgGain"] {
		margin: -90px 0 0 -161px;

		.dlg-content .dlg-body {
			padding-top: 17px;
		}
	}

	&[data-dlg="dlgNormalize"] {
		margin: -90px 0 0 -161px;

		.dlg-content .dlg-body {
			padding-top: 17px;
		}
	}

	&[data-dlg="dlgCompressor"] {
		margin: -130px 0 0 -190px;
	}

	&[data-dlg="dlgGraphicEq"] {
		margin: -140px 0 0 -240px;
	}

	&[data-dlg="dlgGraphicEq20"] {
		margin: -140px 0 0 -445px;
	}

	&[data-dlg="dlgParagraphicEq"] {
		margin: -210px 0 0 -235px;

		.dlg-content {
			.dlg-body {
				padding-top: 0;

				&:before {
					display: none;
				}
			}
		}
	}

	&[data-dlg="dlgHardLimiter"] {
		margin: -90px 0 0 -140px;

		.dlg-content {
			min-width: 260px;

			.field-box {
				width: 83px;

				.value {
					margin: 0 11px;
				}
			}
		}
	}

	&[data-dlg="dlgDelay"] {
		margin: -90px 0 0 -140px;

		.dlg-content {
			min-width: 220px;

			.field-box {
				width: 83px;

				.value {
					margin: 0 11px;
				}
			}
		}
	}

	&[data-dlg="dlgDistortion"] {
		margin: -90px 0 0 -161px;

		.dlg-content .dlg-body {
			padding-top: 17px;
		}
	}

	&[data-dlg="dlgReverb"] {
		margin: -90px 0 0 -140px;

		.dlg-content {
			min-width: 220px;

			.field-box {
				width: 83px;

				.value {
					margin: 0 11px;
				}
			}
		}
	}

	&[data-dlg="dlgSpeed"] {
		margin: -90px 0 0 -161px;

		.dlg-content .dlg-body {
			padding-top: 17px;
		}
	}


	.dlg-content {
		background: linear-gradient(180deg, #3c5b87 0%, #2f466e 100%);
		position: relative;
		min-width: 340px;
		padding: 9px 9px 7px;
		display: flex;
		flex-direction: column;
		text-align: left;
		border-radius: inherit;

		.dlg-body {
			position: relative;
			font-size: 0;
			padding: 9px 0 0;
			white-space: nowrap;
			min-height: 61px;

			&:before {
				content: "";
				position: absolute;
				top: -2px;
				left: -3px;
				right: -3px;
				bottom: 0;
				background: rgba(#002,.05);
				box-shadow: inset 0 0 3px rgba(#002,.125);
				border-radius: 4px;
			}

			> * {
				white-space: initial;
			}
		}

		input[type="text"] {
			border: 0;
			border-radius: 4px;
			padding: 0 1px 0px;
			font-size: 11px;
			height: 21px;
			color: inherit;
			font-size: 12px;
			text-align: inherit;
			background: transparent;
			box-shadow: none;
		}

		hr {
			background: linear-gradient(90deg, transparent 0%, #788 50%, transparent 100%);
			opacity: .35;
			margin: 23px 0;
		}

		h2 {
			position: relative;
			top: -2px;
			padding-top: 2px;
			padding-left: 19px;
			color: #a5d8e4;
			text-shadow: 0 0 7px #71a1ca99,
						0 0 3px #71a1ca99;
			font-size: 11px;
			font-weight: 400;
			text-transform: uppercase;
			margin-bottom: 7px;

			// &:hover .icon-dlg-close:after {
			// 	filter: invert(2) brightness(1.15) drop-shadow(0 1px 0 #00000030);
			// }

			.icon-dlg-close {
				position: absolute;
				top: 1px;
				left: -1px;
				width: 13px;
				height: 13px;
				z-index: 2;
				background: url(~/icons/icon-switch.png) 50% 50%/contain no-repeat;
				filter: invert(1) brightness(1) sepia(1) hue-rotate(135deg) drop-shadow(0 0 3px #71a1cabb);
				cursor: pointer;
			}

			.toggler {
				background: rgba(#9ad, .1);
				position: absolute;
				right: 0;
				top: -2px;
				margin-right: 0;
				font-size: 11px;
				height: 20px;

				span {
					background: #536f9a;
					padding: 4px 0 3px;
				}
			}
		}

		.label {
			color: #abd;
			font-size: 10px;
			text-shadow: 0 1px 0 rgba(#000,.25);
		}

		.field-box {
			display: inline-block;
			width: 73px;
			margin: 0 7px 7px 0;
			padding: 5px;
			border-radius: 4px;
			text-align: center;
			// box-shadow: 0 0 0 1px rgba(#cdf,.2);
			// box-shadow: none;

			&:last-child {
				margin-right: 0;
			}

			.label {
				text-transform: uppercase;
			}

			.pan-knob,
			.knob {
				display: block;
				margin: 7px auto 5px;
				filter: drop-shadow(0 1px 0 rgba(#a5d8e4,.1));
			}

			.value {
				display: inline-block;
				padding: 0 5px;
				background: rgba(#113,.075);
				box-shadow: inset 0 1px 0 rgba(#002,.075),
							inset 0 -1px 0 rgba(#fff,.075);
				border-radius: 3px;

				input { top: -1px; }
			}
		}

		.field-range-h {
			display: flex;
			padding: 2px 7px;

			.label {
				flex: 1;
				font-size: 12px;
				padding: 2px 0 0;
			}

			.slider {
				position: relative;
				width: 139px;
				height: 13px;
				margin: 2px 13px 0 0;
				// cursor: col-resize;

				&:before {
					content: "";
					background: rgba(#000,.1);
					position: absolute;
					top: 5px;
					left: 0;
					right: 0;
					bottom: 5px;
					border-radius: 5px;
				}

				&.active .handle,
				&:hover .handle {
					box-shadow: 0 0 17px #71a1ca,
								0 0 7px #71a1ca,
								0 0 3px #71a1ca;
				}

				.handle {
					position: absolute;
					top: 2px;
					left: 50%;
					width: 3px;
					height: 9px;
					margin-left: -1px;
					border-radius: 7px;
					background: #9fcef6;
					pointer-events: none;
				}
			}

			.value {
				position: relative;
				top: -1px;
				width: 43px;
				text-align: center;
				background: rgba(#113,.075);
				box-shadow: inset 0 1px 0 rgba(#002,.075),
							inset 0 -1px 0 rgba(#fff,.075);
				border-radius: 3px;

				input {
					top: -1px;
					cursor: default;
				}
			}
		}

		.field-range {
			display: inline-block;
			width: 37px;
			margin: 0 9px 0 0;
			text-align: center;

			&:last-child {
				// margin-right: 0;
			}

			.value {
				display: block;
				height: 19px;
				margin-bottom: 9px;
				display: none;
			}

			.slider {
				position: relative;
				left: 14px;
				height: 101px;
				width: 13px;
				margin: 0 0 11px;
				border-radius: 13px;
				display: block;

				&:before {
					content: "";
					background: rgba(#002,.1);
					position: absolute;
					top: 0;
					left: 5px;
					right: 5px;
					bottom: 0;
					border-radius: inherit;
				}

				&:after {
					content: "";
					position: absolute;
					top: 2px;
					bottom: 2px;
					right: -9px;
					width: 6px;
					pointer-events: none;
					background: repeating-linear-gradient(180deg,
						rgba(#000,.25) 0px, rgba(#000,.25) 1px, transparent 1px, transparent 12px
					);
				}

				&:hover .handle {
					box-shadow: 0 0 17px #71a1ca,
								0 0 7px #71a1ca,
								0 0 3px #71a1ca;
				}

				.handle {
					position: absolute;
					top: 49px;
					left: 2px;
					width: 9px;
					height: 3px;
					margin-top: -1px;
					border-radius: 7px;
					background: #9fcef6;
					pointer-events: none;
				}
			}

			.label {
				display: block;
				height: 13px;
			}
		}

		.field-row {
			height: 32px;
			margin-right: 19px;

			&.has-knob {
				display: flex;
				margin-right: 13px;

				.knob,
				.pan-knob {
					// visibility: hidden;
					// opacity: 0;
					transition: opacity 500ms;
					margin-bottom: -3px;
				}

				&:hover .pan-knob,
				&.hover .pan-knob,
				&:hover .knob,
				&.hover .knob {
					visibility: visible;
					opacity: 1;
				}
			}

			.option {
				min-width: 150px;
				padding: 6px 0 0;
				margin-right: 1px;

				.label {
					min-width: 80px;
				}

				.value {
					margin-right: 3px;

					input {
						cursor: default;
						width: 53px;
					}
				}
			}
		}

		.buttons {
			position: relative;
			padding-top: 7px;
			text-align: right;
			font-size: 0;

			.presets {
				position: absolute;
				left: 0;
				top: 7px;
			}

			.button {
				position: relative;
				box-shadow: inset 0 1px 0 rgba(#eef,.15);
				display: inline-block;
				width: 73px;
				text-align: center;
				margin-left: 5px;
				margin-right: 0;

				&:after {
					content: "";
					position: absolute;
					bottom: -2px;
					left: 0;
					right: 0;
					height: 1px;
					opacity: .25;
					background: linear-gradient(90deg, transparent 0%, #cdf 50%, transparent 100%);
				}

				&.hidden {
					display: none;
				}
			}
		}
	}

	.presets {
		background: rgba(#bbe, .25);
		display: inline-block;
		vertical-align: middle;
		padding: 2px 2px 0 11px;
		margin-top: -1px;
		font-size: 13px;
		color: rgba(#fff, .5);
		text-shadow: 0 1px 0 rgba(#000, .45);
		box-shadow: inset 0 1px 0 rgba(#eef,.15);
		border: 1px solid rgba(#002, .45);
		border-radius: 5px;
		opacity: 0.75;
		height: 21px;
		transition: border-radius 140ms ease-in-out;
		
		&:after {
			content: "";
			position: absolute;
			bottom: -2px;
			left: 0;
			right: 0;
			height: 1px;
			opacity: .25;
			background: linear-gradient(90deg, transparent 0%, #cdf 50%, transparent 100%);
		}

		&.unlocked {
			background: red;
		}

		&.hover,
		&:hover {
			color: rgba(#fff, .85);
			border-top-right-radius: 11px;
			border-bottom-right-radius: 11px;
			padding-right: 9px;

			div {
				max-width: 131px;
				opacity: 1;

				ul {
					margin-left: 0;
				}
			}
		}

		span {
			padding-right: 5px;

			i.icon-presets {
				filter: invert(1) brightness(1.15) drop-shadow(0 1px 0 rgba(#000, .5));
			}
		}

		div {
			// background: rgba(#002,.1);
			vertical-align: top;
			display: inline-block;
			position: relative;
			top: 0;
			padding-left: 1px;
			max-width: 0;
			opacity: 0;
			height: 15px;
			overflow: hidden;
			transition: all 140ms ease-in-out;
		}

		ul {
			position: relative;
			top: 0;
			right: 0;
			margin: 0 -5px 0 -100%;
			padding: 0;
			display: flex;
			list-style: none;
			text-align: center;
			transition: margin-left 140ms ease-in-out;
			// border: 1px solid rgba(#cdf,.2);
			// border-radius: 2px 9px 9px 2px;

			li {
				position: relative;
				padding: 1px 0;
				width: 21px;
				display: inline-block;
				cursor: pointer;
				// border-right: 1px solid rgba(#cdf,.2);

				&.empty {
					display: none;
				}

				&:before {
					content: "";
					position: absolute;
					left: -1px;
					top: 1px;
					bottom: 0;
					width: 0;
					border-left: 1px solid rgba(#002,.1);
					border-right: 1px solid rgba(#cdf,.2);
				}

				&.lock {
					padding: 0 0 0 7px;
				}

				&:hover {
					color: rgba(#cdf,.5);
				}
			}

			i.icon-padlock,
			i.icon-padlock-unlocked {
				cursor: pointer;
				top: -1px;
				filter: invert(1) brightness(1.15) drop-shadow(0 1px 0 rgba(#000, .5));
			}
		}
	}

	.peq-cvs {
		position: relative;
		margin: -1px 0 11px 17px;
		width: 450px;
		height: 204px;
		background: 
			linear-gradient(180deg,
				transparent 0, transparent 100px,
				rgba(#cdf,.2) 100px, rgba(#cdf,.2) 101px,
				transparent 101px, transparent 200px,
			),
			repeating-linear-gradient(180deg,
				transparent 0, transparent 5px, rgba(#cdf,.1) 5px, rgba(#cdf,.1) 6px, transparent 6px, transparent 19px
			),
			repeating-linear-gradient(90deg,
				transparent 0,
				transparent 125px, rgba(#cdf,.2) 125px, rgba(#cdf,.2) 126px, transparent 126px,
				transparent 136px
			);

		&:before {
			content: "";
			position: absolute;
			top: 0;
			left: 3px;
			right: -1px;
			bottom: 3px;
			z-index: 2;
			background: rgba(#002,.1);
			box-shadow: inset 0 0 2px rgba(#002,.1),
						inset 0 0 7px rgba(#002,.25);
			border-radius: 5px;
		}

		&:after {
			content: "";
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 3px;
			z-index: 1;
			pointer-events: none;
			background: repeating-linear-gradient(90deg,
				transparent 0,
				transparent 30px, rgba(#cdf,.1) 30px, rgba(#cdf,.1) 31px, transparent 31px,
				transparent 55px, rgba(#cdf,.1) 55px, rgba(#cdf,.1) 56px, transparent 56px,
				transparent 74px, rgba(#cdf,.1) 74px, rgba(#cdf,.1) 75px, transparent 75px,
				transparent 89px, rgba(#cdf,.1) 89px, rgba(#cdf,.1) 90px, transparent 90px,
				transparent 103px, rgba(#cdf,.1) 103px, rgba(#cdf,.1) 104px, transparent 104px,
				transparent 114px, rgba(#cdf,.1) 114px, rgba(#cdf,.1) 115px, transparent 115px,
				transparent 121px, rgba(#cdf,.1) 121px, rgba(#cdf,.1) 122px, transparent 122px,
				transparent 136px
			);
		}

		canvas {
			// background: red;
			position: absolute;
			top: 1px;
			left: 4px;
			width: calc( 100% - 4px );
			height: calc( 100% - 5px );
		}

		.gutter-vert {
			position: absolute;
			top: 0;
			bottom: 0;
			left: -17px;
			width: 14px;
			font-size: 10px;
			text-align: right;
			color: rgba(#cdf,.35);
			text-shadow: 0 1px 0 rgba(#000,.1);
			pointer-events: none;
			// background: rgba(#000,.1);

			ul {
				list-style: none;
				padding: 19px 0;

				li {
					height: 38px;
				}
			}
		}

		.gutter-hori {
			position: absolute;
			bottom: -11px;
			left: 0;
			right: 0;
			height: 11px;
			color: rgba(#cdf,.35);
			text-shadow: 0 1px 0 rgba(#000,.1);
			pointer-events: none;

			ul {
				// background: rgba(#000,.1);
				font-size: 0;
				list-style: none;
				padding: 0;
				display: flex;

				li {
					position: relative;
					white-space: nowrap;
					font-size: 10px;
					width: 65px;

					&:nth-child(2n + 1) {
						padding-left: 31px;
					}

					&:nth-child(2n) {
						text-align: right;
						left: 7px;
					}

					&:first-child {
						padding-left: 0;
					}

					&:last-child {
						left: 2px;
						width: auto;
						flex: 1;
					}

					&:nth-child(3) { padding-left: 25px; }
					&:nth-child(6) { left: 20px; }
				}
			}
		}

		.peq-dot-wrapper {
			// background: rgba(#f00,.15);
			position: absolute;
			top: 0;
			right: 0;
			left: 3px;
			bottom: 3px;
			z-index: 3;

			.peq-dot {
				position: absolute;
				width: 13px;
				height: 13px;
				margin: -6px 0 0 -6px;
				border-radius: 50%;
				box-shadow: 0 0 0 1px rgba(#000,.15);
				background: #71a1ca;
				cursor: pointer;

				&:hover {
					background: #a5d8e4;
					box-shadow: 0 0 0 1px rgba(#000,.15),
								0 0 7px #71a1ca99,
								0 0 3px #71a1ca99;
				}

				&.off {
					background: #71a1ca33;
					box-shadow: 0 0 0 1px #71a1ca99;
				}

				&.hover,
				&.active {
					background: #eef;
					box-shadow: 0 0 0 1px rgba(#000,.15),
								0 0 17px #71a1ca66,
								0 0 7px #71a1ca99,
								0 0 3px #71a1ca99;
				}
			}
		}
	}

	.peq-list {
		position: relative;
		margin: 23px 0 0 19px;
		padding: 1px;
		box-shadow: inset 0 0 0 1px rgba(#002,.1);
		border-radius: 5px;
		font-size: 12px;
		display: flex;
		flex-direction: column;

		.list-body {
			flex: 1;
			min-height: 43px;
			padding-bottom: 13px;
			border-radius: inherit;
			border-top-left-radius: 0;
			border-top-right-radius: 0;
			// box-shadow: inset 0 0 3px rgba(#002,.1);
			background: rgba(#779,.1);
			color: rgba(#cdf,.35);

			.list-row {
				height: 21px;

				&.active,
				&.hover,
				&:hover {
					// box-shadow: 0 1px 0 rgba(#779,.1);
					color: rgba(#cdf,.75);

					> div {
						.type-options {
							opacity: 1;
						}

						.icon-audio-on,
						.icon-audio-off,
						.icon-trashcan {
							opacity: .5;

							&:hover {
								opacity: 1;
							}
						}
					}
				}
			}
		}

		.list-row {
			display: flex;
			text-shadow: 0 1px 0 rgba(#000,.15);

			&.head {
				background: rgba(#88b,.175);
				height: 18px;
				border-top: 1px solid rgba(#fff,.04);
				border-bottom: 1px solid rgba(#002,.3);
				border-radius: inherit;
				border-bottom-left-radius: 0;
				border-bottom-right-radius: 0;
				box-shadow: inset 0 -1px 0 rgba(#002,.075);
				text-transform: uppercase;
				font-size: 10px;
				color: rgba(#cdf,.5);

				> div {
					&:not(:first-child):after {
						content: "";
						position: absolute;
						left: -1px;
						top: 2px;
						bottom: 2px;
						width: 0;
						border-left: 1px solid rgba(#002,.1);
						border-right: 1px solid rgba(#ddf,.1);
					}
				}
			}

			> div {
				position: relative;
				padding: 3px 5px 3px;
				text-align: center;

				&:nth-child(1) { flex: 1; }
				&:nth-child(2) { width: 97px; }
				&:nth-child(3) { width: 97px; }
				&:nth-child(4) { width: 97px; }
				&:nth-child(5) { width: 53px; text-align: left; padding-left: 5px; }

				&:nth-child(2) span,
				&:nth-child(3) span,
				&:nth-child(4) span {
					display: inline-block;
					border-radius: 19px;
					padding: 2px 0;
					width: 73px;
					cursor: pointer;

					&.active,
					&:hover {
						background: rgba(#002,.15);
					}
				}

				.icon-audio-on,
				.icon-audio-off,
				.icon-trashcan {
					opacity: 0;
					top: -1px;
					margin-right: 2px;
					cursor: pointer;
				}
			}
		}

		.type-options {
			position: relative;
			top: -2px;
			font-size: 0;
			display: inline-block;
			box-shadow: 0 0 0 1px rgba(#001,.25);
			border-radius: 11px;
			opacity: .75;

			i {
				position: relative;
				box-shadow: inset 0 1px 0 rgba(#eef,.125),
							inset -1px 0 0 rgba(#eef,.125),
							inset 1px 0 0 rgba(#002,.125);
				display: inline-block;
				width: 21px;
				height: 16px;
				margin: 0;
				filter: none;
				cursor: pointer;

				&:first-child {
					border-radius: 11px 0 0 11px;
					width: 22px;

					&:after {
						left: 5px;
					}
				}

				&:last-child {
					border-radius: 0 11px 11px 0;
					width: 22px;
				}

				&:not(.active):hover:after {
					opacity: .75;
				}

				&.active {
					background-color: #4e6a96;
					box-shadow: inset -1px 0 0 rgba(#002,.1),
								inset 1px 0 0 rgba(#002,.15);
					cursor: default;
				}

				&:after {
					content: "";
					position: absolute;
					top: 2px;
					left: 4px;
					width: 13px;
					height: 13px;
					opacity: .35;
					background-image: inherit;
					background-size: cover;
					background-repeat: no-repeat;
					background-position: 50% 50%;
					filter: invert() drop-shadow(0 1px 0 rgba(#002, .5));
				}

				&.icon-curve-peak:after  { background-image: url(~/icons/icon-curve-peak.png); top: 2px; }
				&.icon-curve-high:after  { background-image: url(~/icons/icon-curve-high.png); }
				&.icon-curve-low:after   { background-image: url(~/icons/icon-curve-low.png); }
			}
		}
	}
}


@keyframes ima-opening {
	0% { transform: scale(0.95); opacity: 0; }
	100% { transform: scale(1); opacity: 1; }
}

@keyframes ima-closing {
	0% { transform: scale(1); opacity: 1; }
	100% { transform: scale(0.95); opacity: 0; }
}

