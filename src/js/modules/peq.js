
let ranges = [];
ranges.push({
	id: 3,
	freq: 2000,
	gian: -15.17,
	q: 5,
	_arr: [-17.43514827341367,-17.195080965519786,-16.957501376884743,-16.72239226170776,-16.489736434173466,-16.259516768451867,-16.031716198698366,-15.806317719053773,-15.583304383644274,-15.362659306581461,-15.144365661962315,-14.92840668386921,-14.714765666369926,-14.503425963517618,-14.294370989350845,-14.087584217893568,-13.88304918315512,-13.680749479130252,-13.480668759799098,-13.28279073912718,-13.087099191065425,-12.893577949550151,-12.702210908503062,-12.512982021831268,-12.32587530342726,-12.140874827168942,-11.957964726919593,-11.777129196527891,-11.59835248982792,-11.421618920639137,-11.246912862766413,-11.07421875,-10.90352107611555,-10.734804394874107,-10.568053320022115,-10.403252525291395,-10.240386744399183,-10.079440771048093,-9.920399458926145,-9.763247721706746,-9.607970533048693,-9.454552926596191,-9.302979995978832,-9.15323689481159,-9.005308836694846,-8.859181095214376,-8.714839003941346,-8.572267956432315,-8.431453406229236,-8.292380866859464,-8.155035911835736,-8.019404174656188,-7.885471348804353,-7.753223187749156,-7.622645504944912,-7.493724173831338,-7.3664451278335354,-7.240794360362008,-7.116757924812651,-6.994321934566751,-6.873472562990992,-6.7541960434374495,-6.636478669243593,-6.5203067937322885,-6.405666830211799,-6.292545251975768,-6.180928592303246,-6.070803444458671,-5.962156461691885,-5.854974357238109,-5.749243904317969,-5.644951936137479,-5.542085345888054,-5.440631086746494,-5.340576171875,-5.241907674421164,-5.1446127275179725,-5.0486785242838055,-4.954092317822439,-4.860841421223038,-4.76891320756017,-4.6782951098937895,-4.588974621269246,-4.500939294717284,-4.414176743254043,-4.32867463988106,-4.244420717585252,-4.161402769338945,-4.079608648099852,-3.9990262668110845,-3.919643598401142,-3.8414486757839232,-3.7644295918587165,-3.688574499510209,-3.613871611608477,-3.540309201008994,-3.467875600552627,-3.396559203065636,-3.3263484613596757,-3.2572318882317948,-3.1891980564644355,-3.1222355988254353,-3.0563332080680246,-2.991479636930827,-2.9276636981378608,-2.8648742643985408,-2.803100268407672,-2.7423307028454573,-2.6825546203774877,-2.623761133654753,-2.565939415313636,-2.5090786979759137,-2.453168274248757,-2.39819749672473,-2.3441557779817903,-2.291032590583293,-2.238817467077982,-2.1875,-2.1370698418688807,-2.0875167051895533,-2.0388303624523396,-1.991000646132957,-1.9440174486925152,-1.8978707225775213,-1.8525504802198702,-1.808046794036857,-1.7643497964311674,-1.721449679790883,-1.6793366964894774,-1.6380011588858197,-1.5974334393241727,-1.5576239701341932,-1.518563243630931,-1.4802418121148317,-1.442650287871734,-1.40577934317287,-1.3696197102748662,-1.3341621814197433,-1.2993976088349166,-1.2653169047331942,-1.2319110413127792,-1.1991710507572682,-1.1670880252356517,-1.1356531169023143,-1.1048575378970353,-1.0746925603449866,-1.045149516356735,-1.0162197980282417,-0.9878948574408608,-0.9601662066613413,-0.9330254177418257,-0.9064641227198511,-0.880474013618348,-0.8550468424456408,-0.8301744211954487,-0.8058486218468844,-0.7820613763644543,-0.7588046766980588,-0.7360705747829932,-0.7138511825399461,-0.692138671875,-0.6709252746796317,-0.6502032828307122,-0.6299650481905058,-0.6102029826066716,-0.590909557912262,-0.5720773059257244,-0.5536988184508985,-0.5357667472770197,-0.5182738041787165,-0.5012127609160117,-0.48457644923432225,-0.4683577608644586,-0.4525496475226255,-0.43714512091042196,-0.4221372527148406,-0.40751917460826803,-0.3932840782484855,-0.37942521527866696,-0.3659358973273818,-0.35280949600859246,-0.3400394429216559,-0.32761922965132273,-0.31554240776773784,-0.3038025888264399,-0.29239344436836184,-0.28130870591983026,-0.2705421649925662,-0.2600876730836841,-0.24993914167569278,-0.2400905422364952,-0.23053590621938808,-0.22126932506306213,-0.21228495019160226,-0.20357699301448717,-0.1951397249265897,-0.1869674773081767,-0.1790546415249088,-0.17139566892784108,-0.16398507085342207,-0.1568174186234946,-0.14988734354529562,-0.1431895369114558,-0.13671875,-0.13046979407434708,-0.12443754038330981,-0.11861692016109508,-0.11300292462730356,-0.10759060498693018,-0.10237507243036373,-0.09735149813338707,-0.09251511325717698,-0.08786120894830438,-0.08338513633873396,-0.07908230654582464,-0.07494819067232926,-0.07097831980639464,-0.06716828502156166,-0.0635137373767651,-0.060010387916333834,-0.056654007669990694,-0.05344042765285255,-0.05036553886543028,-0.04742529229362868,-0.04461569890874663,-0.04193282966747698,-0.03937281551190661,-0.03693184736951637,-0.03460617615318116,-0.03239211276116978,-0.03028602807714514,-0.028284352970164094,-0.026383578294677537,-0.024580254890530343,-0.022870993582961362,-0.021252465182603493,-0.019721400485483615,-0.018274590273022615,-0.01690888531203539,-0.015621196354730799,-0.014408494138711755,-0.013267809386975141,-0.012196232807911857,-0.0111909150953068,-0.010249066928338879,-0.009367958971580976,-0.008544921875,-0.007777346273956863,-0.0070626827892064726,-0.006398442026897733,-0.0057821945785735615,-0.005211571021170872,-0.004684261917020579,-0.004198017813847604,-0.0037506492447708646,-0.0033400267283032843,-0.0029640807683517924,-0.0026208018542173113,-0.0023082404605947733,-0.0020245070475731113,-0.0017677720606352559,-0.0015362659306581465,-0.0013282790739127183,-0.0011421618920639135,-0.0009763247721706749,-0.0008292380866859463,-0.000699432193456675,-0.000585497435723811,-0.00048608414212230396,-0.0003999026266811083,-0.0003257231888231795,-0.00026237611336547525,-0.00020875167051895527,-0.00016380011588858196,-0.00012653169047331946,-0.00009601662066613415,-0.00007138511825399459,-0.000051827380417871646,-0.00003659358973273819,-0.00002499391416756927,-0.000016398507085342203,-0.000010237507243036372,-0.0000060010387916333846,-0.000003239211276116978,-0.0000015621196354730794,-6.398442026897733e-7,-2.0245070475731112e-7,-3.999026266811083e-8,-2.499391416756927e-9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
	_coords: { x: 90, y: 161 },
});

let line_arr = new Array(1000);


let Peq = {
	init(dEl) {
		let Self = this,
			el = dEl.find(`.peq-cvs .media-analyzer`),
			width = el.prop("offsetWidth"),
			height = el.prop("offsetHeight");
		// fast references
		Self._width = width;
		Self._height = height;
		// prepare canvas
		Self._lineCvs = el.nextAll("canvas.peq-line:first").attr({ width, height });
		Self._lineCtx = Self._lineCvs[0].getContext("2d");
		Self._lineCtx.strokeStyle = "#d0f6ff";
		Self._lineCtx.lineWidth = 1;
		Self._lineCtx.translate(.5, .5);
		// initial draw line
		Self.render();


		// ctx.beginPath();
		// ctx.moveTo(0, 99);
		// ctx.lineTo(446, 99);
		// ctx.stroke();
	},
	render() {
		let Self = this,
			ctx = Self._lineCtx,
			cw = Self._width,
			ch = Self._height,
			ch_half = ch / 2,
			max_db_val = 35,
			arr = [],
			total = line_arr.length;


		for (var o=0; o<ranges.length; ++o) {
			var curr = ranges[o];
			for (var i=0; i<total; ++i) {
				line_arr[i] = curr._arr[i];
			}
		}


		ctx.clearRect(0, 0, 1e3, 1e3);

		ctx.beginPath();
		ctx.moveTo(0, ch_half - (line_arr[ 0 ] * (ch_half / max_db_val)));

		for (var i=0; i<(total/4); i+=1) {
			var el = line_arr[i];
			var x = (i * 2) * (cw / total);
			var y = ch_half - (el * (ch_half / max_db_val));
			ctx.lineTo(x, y);
		}

		var hh = 0;
		for (var i=(total/4); i<total; i+=3) {
			var el = line_arr[i];
			hh += 2;
			var x = ((total / 2) + hh) * (cw / total);
			var y = ch_half - (el * (ch_half / max_db_val));
			ctx.lineTo ( x, y );
		}
		ctx.stroke ();
	}
};
